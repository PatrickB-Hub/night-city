(this["webpackJsonpnight-city"]=this["webpackJsonpnight-city"]||[]).push([[0],{40:function(e,t,r){},46:function(e,t,r){"use strict";r.r(t);var n=r(11),a=r(0),o=r(20),i=r.n(o),c=r(8),s=(r(40),Object(a.createContext)({})),l=r(48),u=r(49),f=r(1),h=function(){var e=Object(l.a)().progress;return Object(f.jsx)(u.a,{center:!0,children:Object(f.jsxs)("span",{style:{color:"#FFFFFF"},children:[e," % loaded"]})})},j=r(4),p=r(2),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useMemo)((function(){var t={format:p.RGBAFormat,generateMipmaps:!0};return new p.WebGLCubeRenderTarget(1024,Object(j.a)(Object(j.a)({},t),e))}),[e]),r=Object(a.useRef)();return Object(c.c)((function(e){var t,n=e.gl,a=e.scene;null===r||void 0===r||null===(t=r.current)||void 0===t||t.update(n,a)})),[r,t]},b=function(){var e=Object(a.useRef)(),t=Object(c.f)().size,r=Object(a.useRef)({x:t.width/2,y:t.height/2}),o=Object(a.useMemo)((function(){return[new p.Euler(0,0,0),new p.Quaternion(0,0,0,0)]}),[]),i=Object(n.a)(o,2),s=i[0],l=i[1];return Object(a.useEffect)((function(){var e=function(e){var t=e.clientX,n=e.clientY;r.current={x:t,y:n}};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}),[]),Object(c.c)((function(){if(e.current){var n=r.current.x/t.width/10,a=r.current.y/t.height/10;s.set(a,n,0),l.setFromEuler(s),e.current.quaternion.slerp(l,.1)}})),e},m=r(9),v=r(47),x={sections:10,pages:10,fov:75,scrollTop:0,textComponentOffset:6,colors:{background:"#202020",headings:["#fcf435","#03d7f2"],articleIndex:"#141414"},font:"./Play_Bold.json",hero:{image:"./cyberpunk_logo-blurred.png"},articles:[{offset:1,factor:1.75,header:"Skyline",image:"./city_night.png",aspect:1.65,text:"Night City's corporate showcase. Sleek skyscrapers form a brutalist, fortress-like skyline, presenting the unrivaled power of megacorps in all its arrogance."},{offset:2,factor:2,header:"Slums",image:"./city_fog.png",aspect:1.55,text:"Heywood is a neighborhood of contrast\u2014from modern skyscrapers and parks in the north, to dangerous, inhospitable slums in the south."},{offset:3,factor:2.25,header:"Vibrant",image:"./city_neon2.png",aspect:1.5,text:"Westbrook is considered by many to be the best place to live and have fun in Night City. If you've got eddies, you come here to spend them. And if you don't? Well, take out a loan and pretend you're on top of the world."},{offset:4,factor:2,header:"Crime",image:"./city_day.png",aspect:1.75,text:"By 2077, the city has been overrun with crime, with the crime rate doubled than that of the NUSA. The homeless population has been a problem since the 2000s, and is now risen 300%. Each district is dominated by at least one gang."},{offset:5,factor:1.75,header:"Trade",image:"./city_neon3.png",aspect:1.55,text:"Kabuki is a maze of narrow alleyways located right next to Little China. At night, they turn into a bazaar for implants, organs, steroids, and much more. It's said anything a person could desire can be found in the Kabuki Market."},{offset:7.25,factor:1.55,header:"Thrilling",image:"./city_buildings.png",aspect:1.7,text:"Night City is considered a thrilling and exciting location to visit, as well as an interesting and vibrant place to live for those of means, and a hellscape to the city's disenfranchised."},{offset:8.25,factor:1.5,header:"Busy",image:"./city_streets.png",aspect:1.75,text:"The business sectors of Night City include manufacturing industries, international trade and commerce, information services, electronic technologies, security services, and so on."}],crosses:[{factor:-.25,offset:0,speed:7.5,color:"#141414",scale:[1,1,1],position:[6,2.5,.1]},{factor:-1.25,offset:6,speed:10,color:"#fcf435",scale:[.8,.8,1],position:[6,-1.5,.1]}],lines:[{factor:-1.5,offset:0,color:"#141414",scale:[.17,.7,1],position:[-4,1.75,.1]},{factor:-1.5,offset:6,color:"#fcf435",scale:[.12,.35,1],position:[4,1.75,.1]},{factor:-1.2,offset:6.25,color:"#fcf435",scale:[.15,.5,1],position:[-5,2.75,.1]}],stars:[{factor:-.75,offset:10,speed:7.5,posFactor:-.15,color:"#03D7F2",scale:[.25,.25,1],position:[-8,-8,.1]}],stripes:[{offset:6.1,color:"#181818",height:22}],shards:[{args:[2.87483173052424,2.120755196190408,.05],position:[3.116376203948097,-2.1742814140991196,1.998859699752443],rotation:[.2536197471688286,-.6683567077395978,-.8428053193736256]},{args:[1.799233278635274,1.9642524560408021,.05],position:[-3.325473394997085,3.5307542721423446,1.530151273151705],rotation:[.3951213133257899,-.2888432911308304,.7178380971731012]},{args:[.8780801433198553,2.206521654385597,.05],position:[1.2839348832937714,2.888947614684322,1.767835086028824],rotation:[-.3341775957580109,.8031736269533125,-.18771283594857274]},{args:[2.2175936863874006,1.3820832190972703,.05],position:[4.552400557892,.9814639517113943,2.136395383986279],rotation:[-.3299625953354437,.6139693063561498,-.3902201705507059]},{args:[1.7446126775638997,1.8211835436253392,.05],position:[-2.826056860647832,-3.0308788716782042,1.4685371584057485],rotation:[-.4052581815125295,.002812728418492,.54202362440499]},{args:[1.139549518339333,1.8007363020629232,.05],position:[-.041834072623521124,-1.351281881742426,1.40411451302583],rotation:[.2848394396618561,-.310029190116405,-.107987000676972]},{args:[2.2021865186914007,1.610358395964105,.05],position:[-4.154292737578202,-.349560252979882,2.489538720961452],rotation:[.4401104979160235,.8179123712769852,-.2157249608220475]},{args:[.1426105440458216,2.416201863189162,.05],position:[.646982562789564,1.0909673302614196,-.351518200349154],rotation:[-.0692356415822184,1.918047448701773,.5268942683942657]}]},O=function(e){var t=e.children,r=e.size,o=void 0===r?1:r,i=e.left,l=e.right,u=e.top,h=e.bottom,d=e.color,b=void 0===d?"white":d,v=e.opacity,O=void 0===v?1:v,g=e.height,y=void 0===g?.01:g,M=e.font,w=void 0===M?x.font:M,_=Object(m.a)(e,["children","size","left","right","top","bottom","color","opacity","height","font"]),F=Object(a.useState)(),I=Object(n.a)(F,2),C=I[0],k=I[1],S=Object(a.useContext)(s);Object(a.useEffect)((function(){(new p.FontLoader).load(w,(function(e){var r=new p.TextBufferGeometry(t,{font:e,size:1,height:y,curveSegments:32});k(r)}))}),[t,w,y]);var T=Object(a.useCallback)((function(e){var t=new p.Vector3;e.geometry.computeBoundingBox(),e.geometry.boundingBox.getSize(t),e.position.x=i?0:l?-t.x:-t.x/2,e.position.y=u?0:h?-t.y:-t.y/2}),[i,l,u,h]),z=Object(a.useRef)(),R=S.current;return Object(c.c)((function(){z.current&&(z.current.shift=p.MathUtils.lerp(z.current.shift,(S.current-R)/200,.1)),R=S.current})),Object(f.jsx)("group",Object(j.a)(Object(j.a)({scale:[o,o,.1]},_),{},{children:Object(f.jsx)("mesh",{geometry:C,onUpdate:T,frustumCulled:!1,children:Object(f.jsx)("customMaterial",{ref:z,attach:"material",color:b,transparent:!0,opacity:O})})}))},g=function(e){var t=e.text,r=e.size,n=void 0===r?1:r,a=e.lineHeight,o=void 0===a?1:a,i=e.position,c=void 0===i?[0,0,0]:i,s=Object(m.a)(e,["text","size","lineHeight","position"]);return Object(f.jsx)(f.Fragment,{children:t.split("\n").map((function(e,t){return Object(f.jsx)(O,Object(j.a)({position:[c[0],c[1]-t*o,c[2]],size:n,children:e},s),t)}))})},y=function(){var e=Object(c.f)(),t=e.size,r=e.viewport,n=Object(a.useContext)(M),o=x.sections,i=x.pages,s=t.width,l=t.height,u=r.width,f=r.height,h=t.width<700;return{offset:n,viewportWidth:s,viewportHeight:l,canvasWidth:u,canvasHeight:f,mobile:h,margin:u*(h?.2:.1),contentMaxWidth:u*(h?.8:.6),sectionHeight:f*((i-1)/(o-1)),offsetFactor:(n+1)/o}},M=Object(a.createContext)(0),w=function(e){var t=e.children,r=e.name,n=e.offset,o=e.factor,i=Object(m.a)(e,["children","name","offset","factor"]),l=y(),u=l.offset,h=l.sectionHeight,d=l.viewportHeight,b=Object(a.useRef)(),v=Object(a.useContext)(s);return n=n||u,Object(c.c)((function(){if(b.current){var e=b.current.position.y,t=v.current;b.current.position.y=p.MathUtils.lerp(e,t/(d/h)*o,.1)}})),Object(f.jsx)(M.Provider,{value:n,children:Object(f.jsx)("group",Object(j.a)(Object(j.a)({name:r,position:[0,-h*n*o,0]},i),{},{children:Object(f.jsx)("group",{ref:b,children:t})}))})},_=r(3),F=r(7),I=r(5),C=r(6),k=function(e){Object(I.a)(r,e);var t=Object(C.a)(r);function r(){return Object(_.a)(this,r),t.call(this,{vertexShader:"\n      uniform float scale;\n      uniform float shift;\n      varying vec2 vUv;\n\n      void main() {\n        vec3 pos = position;\n        pos.y = pos.y + ((sin(uv.x * 3.1415926535897932384626433832795) * shift * 5.0) * 0.125);\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n      }",fragmentShader:"\n      uniform sampler2D tex;\n      uniform float hasTexture;\n      uniform float shift;\n      uniform float scale;\n      uniform vec3 color;\n      uniform float opacity;\n      varying vec2 vUv;\n      \n      void main() {\n        float angle = 1.55;\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\n        vec2 offset = shift / 4.0 * vec2(cos(angle), sin(angle));\n        vec4 cr = texture(tex, p + offset);\n        vec4 cga = texture(tex, p);\n        vec4 cb = texture(tex, p - offset);\n        if (hasTexture == 1.0) gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        else gl_FragColor = vec4(color, opacity);\n      }",uniforms:{tex:{value:null},hasTexture:{value:0},scale:{value:0},shift:{value:0},opacity:{value:1},color:{value:new p.Color("white")}}})}return Object(F.a)(r,[{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"shift",get:function(){return this.uniforms.shift.value},set:function(e){this.uniforms.shift.value=e}},{key:"map",get:function(){return this.uniforms.tex.value},set:function(e){this.uniforms.hasTexture.value=!!e,this.uniforms.tex.value=e}},{key:"color",get:function(){return this.uniforms.color.value},set:function(e){this.uniforms.color.value=e}}]),r}(p.ShaderMaterial);Object(c.b)({CustomMaterial:k});var S=Object(a.forwardRef)((function(e,t){var r=e.name,n=e.color,o=void 0===n?"white":n,i=e.shift,l=void 0===i?1:i,u=e.opacity,h=void 0===u?1:u,d=e.planeArgs,b=e.map,v=Object(m.a)(e,["name","color","shift","opacity","planeArgs","map"]),O=y(),g=O.viewportHeight,M=O.offsetFactor,w=Object(a.useContext)(s),_=Object(a.useRef)(),F=w.current;return Object(c.c)((function(){_.current&&(_.current.scale=p.MathUtils.lerp(_.current.scale,M-w.current/((x.pages-1)*g),.1),_.current.shift=p.MathUtils.lerp(_.current.shift,(w.current-F)/l,.1)),F=w.current})),Object(f.jsxs)("mesh",Object(j.a)(Object(j.a)({name:r,ref:t},v),{},{children:[Object(f.jsx)("planeBufferGeometry",{attach:"geometry",args:d}),Object(f.jsx)("customMaterial",{ref:_,attach:"material",color:o,map:b,transparent:!0,opacity:h})]}))})),T=function(e){var t=e.image,r=e.index,n=e.offset,a=e.factor,o=e.header,i=e.aspect,c=e.text,s=y(),l=s.contentMaxWidth,h=s.canvasWidth,j=s.viewportWidth,p=s.margin,d=s.mobile,b=i<1&&!d?.65:1,m=(h-l*b-p)/2,v=j*b/2,g=!(r%2),M=r%2?x.colors.headings[0]:x.colors.headings[1];return Object(f.jsx)(w,{name:"article-".concat(r),factor:a,offset:n,children:Object(f.jsxs)("group",{position:[g?-m:m,0,0],children:[Object(f.jsx)(O,{name:"title",left:g,right:!g,size:.05*l,color:M,top:!0,position:[(g?-l:l)*b/2,l*b/i/2+.5,-.02],children:o}),Object(f.jsx)(S,{name:"image",map:t,planeArgs:[1,1,32,32],shift:200,scale:[l*b,l*b/i,1],frustumCulled:!1}),Object(f.jsx)(u.a,{name:"text",style:{width:v/(d?1:2),textAlign:g?"left":"right"},position:[g?-l*b/2:d?-p/2:p/2,-l*b/2/i-.4,-.02],children:c}),Object(f.jsx)(w,{name:"article-index",factor:.2,children:Object(f.jsx)(O,{opacity:.5,size:.1*l,color:x.colors.articleIndex,position:[(g?l:-l)/2*(b+.1),l*b/i/-1.7,-.02],children:"0"+(r+1)})})]})})},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0],t=Object(a.useRef)();return Object(a.useEffect)((function(){var r;null===t||void 0===t||null===(r=t.current)||void 0===r||r.layers.disableAll(),e.sort().forEach((function(e){var r;null===t||void 0===t||null===(r=t.current)||void 0===r||r.layers.enable(e)}))})),t},R=function(e){e.name;var t=e.layer,r=e.map,n=Object(m.a)(e,["name","layer","map"]),o=Object(a.useRef)();Object(a.useEffect)((function(){var e;null===o||void 0===o||null===(e=o.current)||void 0===e||e.lookAt(0,0,0)}),[]);var i=z(t);return Object(f.jsx)("group",Object(j.a)(Object(j.a)({ref:o},n),{},{children:Object(f.jsxs)("mesh",{ref:i,children:[Object(f.jsx)("planeBufferGeometry",{attach:"geometry",args:[1,1,32,32]}),Object(f.jsx)("customMaterial",{attach:"material",color:"white",map:r,opacity:1})]})}))},A=function(e){var t=e.name,r=e.layer,n=e.map,o=Object(m.a)(e,["name","layer","map"]),i=Object(a.useMemo)((function(){return new p.IcosahedronGeometry(12).vertices}),[]);return Object(f.jsx)("group",{name:t,children:i.map((function(e,t){return Object(f.jsx)(R,Object(j.a)({name:"planeCopy-".concat(t),map:n,position:e,layer:r},o),"planeCopy-".concat(t))}))})},V=r(17),B=r(12),U=function(e){var t=e.speed,r=e.color,n=e.scale,o=e.position,i=Object(m.a)(e,["speed","color","scale","position"]),l=Object(a.useRef)(),u=y(),h=u.viewportHeight,d=u.mobile,b=Object(a.useContext)(s),v=d?.6:1;return Object(c.c)((function(){if(l.current){var e=b.current,r=l.current.rotation.z,n=e/((x.pages-1)*h)*Math.PI*t;l.current.rotation.z=p.MathUtils.lerp(r,n,.1)}})),Object(f.jsxs)("group",Object(j.a)(Object(j.a)({ref:l,position:[o[0]*v,o[1]*v,o[2]],scale:Object(V.a)(p.Vector3,Object(B.a)(n))},i),{},{children:[Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:r,scale:[1,.25,1],position:[0,0,0]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:r,scale:[.25,1,1],position:[0,0,0]})]}))},L=function(e){var t=e.color,r=e.scale,n=e.position,a=Object(m.a)(e,["color","scale","position"]),o=y().mobile?.65:1;return Object(f.jsxs)("group",Object(j.a)(Object(j.a)({position:[n[0]*o,n[1]*o,n[2]],scale:Object(V.a)(p.Vector3,Object(B.a)(r))},a),{},{children:[Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:20,color:t,position:[-1.5,0,0]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:20,color:t,position:[1.5,0,0]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:20,color:t,position:[0,0,0]})]}))},P=function(e){var t=e.speed,r=e.posFactor,n=e.color,o=e.scale,i=e.position,l=Object(m.a)(e,["speed","posFactor","color","scale","position"]),u=y(),h=u.viewportHeight,d=u.mobile,b=Object(a.useContext)(s),v=Object(a.useRef)(),O=d?.6:1;return Object(c.c)((function(){if(v.current){var e=b.current,n=v.current.rotation.z,a=e/((x.pages-1)*h)*-Math.PI*t;v.current.rotation.z=p.MathUtils.lerp(n,a,.1),v.current.position.x=r*p.MathUtils.lerp(n,a,.05)}})),Object(f.jsxs)("group",Object(j.a)(Object(j.a)({ref:v,position:[i[0]*O,i[1],i[2]],scale:Object(V.a)(p.Vector3,Object(B.a)(o))},l),{},{children:[Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:n,scale:[.25,1.75,1],rotation:[0,0,0]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:n,scale:[.25,1.75,1],rotation:[0,0,Math.PI/2]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:n,scale:[.25,1.75,1],rotation:[0,0,Math.PI/-2]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:n,scale:[.25,1.75,1],rotation:[0,0,Math.PI/4]}),Object(f.jsx)(S,{planeArgs:[1,1,32,32],shift:500,color:n,scale:[.25,1.75,1],rotation:[0,0,Math.PI/-4]})]}))},H=function(){var e=Object(a.useState)(0),t=Object(n.a)(e,2),r=t[0],o=t[1],i=Object(a.useContext)(s),l=Object(v.a)(x.hero.image),u=Object(v.a)(x.articles.map((function(e){return e.image}))),h=y(),d=h.sectionHeight,b=h.contentMaxWidth,O=h.viewportHeight;return Object(a.useMemo)((function(){l.minFilter=p.LinearFilter,u.forEach((function(e){return e.minFilter=p.LinearFilter}))}),[u,l]),Object(c.c)((function(){var e=Math.floor(i.current/(d*(O/d))+.2);o(e>=6?e-1:e)})),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w,{name:"hero",factor:1.2,children:Object(f.jsx)(S,{name:"title",map:l,color:x.colors.background,planeArgs:[1,1,32,32],shift:50,scale:[b,b/4,1],position:[-b/35,0,-.01]})}),x.crosses.map((function(e,t){var r=e.factor,n=e.offset,a=Object(m.a)(e,["factor","offset"]);return Object(f.jsx)(w,{name:"cross-".concat(t),factor:r,offset:n,children:Object(f.jsx)(U,Object(j.a)({},a))},t)})),x.lines.map((function(e,t){var r=e.factor,n=e.offset,a=Object(m.a)(e,["factor","offset"]);return Object(f.jsx)(w,{name:"line-".concat(t),factor:r,offset:n,children:Object(f.jsx)(L,Object(j.a)({},a))},t)})),x.stars.map((function(e,t){var r=e.factor,n=e.offset,a=Object(m.a)(e,["factor","offset"]);return Object(f.jsx)(w,{name:"star-".concat(t),factor:r,offset:n,children:Object(f.jsx)(P,Object(j.a)({},a))},t)})),x.stripes.map((function(e,t){var r=e.offset,n=e.color,a=e.height;return Object(f.jsx)(w,{name:"stripe-".concat(t),factor:-1.5,offset:r,children:Object(f.jsx)(S,{planeArgs:[50,a,32,32],shift:-4,color:n,rotation:[0,0,Math.PI/8],position:[0,0,-.1]})},t)})),x.articles.map((function(e,t){return Object(f.jsx)(T,Object(j.a)(Object(j.a)({index:t},e),{},{image:u[t]}),t)})),Object(f.jsx)(w,{name:"text-night_city",factor:1.2,offset:6,children:Object(f.jsx)(g,{top:!0,left:!0,size:.15*b,lineHeight:b/4.5,position:[-b/3.5,0,-.01],color:x.colors.headings[0],text:"Night\nCity"})}),Object(f.jsx)(w,{name:"text-2077",factor:1.25,offset:9.1,children:Object(f.jsx)(g,{top:!0,left:!0,size:.15*b,lineHeight:b/4.5,position:[-b/3.5,0,-.01],color:x.colors.headings[1],text:"2077"})}),r>0?Object(f.jsx)(A,{name:"planeCopy-".concat(r-1),map:u[Math.min(r-1,u.length-1)],scale:[15,15,15],layer:[11],frustumCulled:!1}):Object(f.jsx)(A,{name:"planeCopy-0",map:l,scale:[4*b,b/4*4,4],layer:[11],frustumCulled:!1})]})},E=function(){var e=new p.Geometry;return e.vertices.push(new p.Vector3(-1,-1,1),new p.Vector3(1,-1,1),new p.Vector3(-1,-.95,1),new p.Vector3(1,-.95,1),new p.Vector3(-1,-1,-1),new p.Vector3(-1,-.95,-1)),e.faces.push(new p.Face3(4,1,0),new p.Face3(0,3,2),new p.Face3(0,1,3),new p.Face3(4,2,5),new p.Face3(4,0,2),new p.Face3(1,4,3),new p.Face3(4,5,3),new p.Face3(2,3,5)),e.computeVertexNormals(),e.faces.forEach((function(e,t){return e.materialIndex=t})),e};function W(e,t,r,n){this._filmThickness=e||500,this._refractiveIndexFilm=t||2,this._refractiveIndexBase=r||3,this._size=n||128,this._data=new Uint8Array(4*this._size),this._updateData(),p.DataTexture.call(this,this._data,this._size,1,p.RGBAFormat,p.UnsignedByteType,p.UVMapping,p.RepeatWrapping,p.RepeatWrapping,p.LinearFilter,p.LinearMipMapLinearFilter),this.generateMipmaps=!0,this.needsUpdate=!0}W.prototype=Object.create(p.DataTexture.prototype,{filmThickness:{get:function(){return this._filmThickness},set:function(e){this._filmThickness=e,this.updateSettings(this._filmThickness,this._refractiveIndexFilm,this._refractiveIndexBase)}},refractiveIndexFilm:{get:function(){return this._refractiveIndexFilm},set:function(e){this._refractiveIndexFilm=e,this.updateSettings(this._filmThickness,this._refractiveIndexFilm,this._refractiveIndexBase)}},refractiveIndexBase:{get:function(){return this._refractiveIndexBase},set:function(e){this._refractiveIndexBase=e,this.updateSettings(this._filmThickness,this._refractiveIndexFilm,this._refractiveIndexBase)}}}),W.prototype.updateSettings=function(e,t,r){this._filmThickness=e||380,this._refractiveIndexFilm=t||2,this._refractiveIndexBase=r||3,this._updateData()},W.prototype._fresnelRefl=function(e,t,r,n,a,o){var i=1-r*r,c=e/t;if(c*c*i>1){a.x=1,a.y=1;var s=c*c;o.x=2*Math.atan(-s*Math.sqrt(i-1/s)/r),o.y=2*Math.atan(-Math.sqrt(i-1/s)/r)}else{var l=(t*r-e*n)/(t*r+e*n),u=(e*r-t*n)/(e*r+t*n);o.x=l<0?Math.PI:0,o.y=u<0?Math.PI:0,a.x=l*l,a.y=u*u}},W.prototype._updateData=function(){var e=this._filmThickness,t=this._refractiveIndexFilm,r=this._refractiveIndexBase,n=this._size;function a(e){var t=(e-442)*(e<442?.0624:.0374),r=(e-599.8)*(e<599.8?.0264:.0323),n=(e-501.1)*(e<501.1?.049:.0382);return.362*Math.exp(-.5*t*t)+1.056*Math.exp(-.5*r*r)-.065*Math.exp(-.5*n*n)}function o(e){var t=(e-568.8)*(e<568.8?.0213:.0247),r=(e-530.9)*(e<530.9?.0613:.0322);return.821*Math.exp(-.5*t*t)+.286*Math.exp(-.5*r*r)}function i(e){var t=(e-437)*(e<437?.0845:.0278),r=(e-459)*(e<459?.0385:.0725);return 1.217*Math.exp(-.5*t*t)+.681*Math.exp(-.5*r*r)}for(var c=this._data,s=new p.Vector2,l=new p.Vector2,u=new p.Vector2,f=new p.Vector2,h=new p.Vector2,j=new p.Vector2,d=new p.Vector2,b=new p.Vector2,m=new p.Vector2,v=new p.Vector2,x=new p.Vector2,O=new p.Vector2,g=1/(t*t),y=t*t/(r*r),M=0;M<n;++M){var w=M/n,_=Math.sqrt(1-g*(1-w*w)),F=Math.sqrt(1-y*(1-_*_)),I=2*t*e*_,C=2*Math.PI*I;this._fresnelRefl(1,t,w,_,f,s),h.x=1-f.x,h.y=1-f.y,l.x=Math.PI-s.x,l.y=Math.PI-s.y,this._fresnelRefl(t,r,_,F,j,u),d.x=Math.sqrt(j.x*f.x),d.y=Math.sqrt(j.y*f.y),b.x=Math.sqrt(h.x*h.x),b.y=Math.sqrt(h.y*h.y),m.x=h.x*h.x*j.x/(1-j.x*f.x),m.y=h.y*h.y*j.y/(1-j.y*f.y),v.x=d.x*d.x,v.y=d.y*d.y,x.x=f.x+m.x,x.y=f.y+m.y,O.x=m.x-b.x,O.y=m.y-b.y;for(var k=0,S=0,T=0,z=0,R=0,A=0,V=0;V<64;++V){var B=380+V/63*400,U=C/B,L=Math.cos(U+u.x+l.x),P=Math.cos(U+u.y+l.y),H=.5*(x.x+2*(d.x*L-v.x)/(1-2*d.x*L+v.x)*O.x+(x.y+2*(d.y*P-v.y)/(1-2*d.y*P+v.y)*O.y)),E=a(B),W=o(B),q=i(B);z+=E,R+=W,A+=q,k+=E*H,S+=W*H,T+=q*H}var N=3.2406*(k/=z)-1.5372*(S/=R)-.4986*(T/=A),G=-.9689*k+1.8758*S+.0415*T,D=.0557*k-.204*S+1.057*T;N=p.MathUtils.clamp(N,0,1),G=p.MathUtils.clamp(G,0,1),D=p.MathUtils.clamp(D,0,1),N=Math.sqrt(N),G=Math.sqrt(G),D=Math.sqrt(D);var J=M<<2;c[J]=Math.floor(255*N),c[J+1]=Math.floor(255*G),c[J+2]=Math.floor(255*D),c[J+3]=255}this.needsUpdate=!0};var q=function(e){var t=e.name,r=e.sideMaterial,n=e.reflectionMaterial,a=e.layers,o=Object(m.a)(e,["name","sideMaterial","reflectionMaterial","layers"]),i=z(a),s=E().clone();return Object(c.c)((function(){i.current&&(i.current.rotation.y+=.001,i.current.rotation.z+=.005)})),Object(f.jsx)("mesh",Object(j.a)({name:t,ref:i,geometry:s,material:[n,r,r,r,r,r,r,n]},o))},N=function(e){var t=e.envMap,r=e.meshLayers,o=Object(m.a)(e,["envMap","meshLayers"]),i=Object(a.useRef)(),l=y(),u=l.viewportHeight,h=l.canvasWidth,d=Object(a.useContext)(s),b=Object(a.useState)(new W),v=Object(n.a)(b,1)[0],O=Object(c.e)(),g=Object(c.e)();return Object(c.c)((function(){if(i.current){var e=d.current,t=i.current.position.x,r=(Math.sin(e/u*Math.PI)-(n=1))*(h-h/2-(a=h/2-h))/(-1-n)+a;i.current.position.x=p.MathUtils.lerp(t,r,.1)}var n,a})),Object(f.jsxs)("group",Object(j.a)(Object(j.a)({ref:i,name:"MirrorShards"},o),{},{children:[Object(f.jsx)("meshLambertMaterial",{ref:O,map:v,color:"#aaa"}),Object(f.jsx)("meshLambertMaterial",{ref:g,map:v,envMap:t,color:"#fff"}),x.shards.map((function(e,t){return Object(f.jsx)(q,Object(j.a)({name:"shard-".concat(t),sideMaterial:O.current,reflectionMaterial:g.current,layers:r},e),"shard-".concat(t))}))]}))},G=function(e){var t=e.showMirrorShards,r=d(),a=Object(n.a)(r,2),o=a[0],i=a[1],c=b();return Object(f.jsxs)("group",{name:"sceneContainer",children:[Object(f.jsx)(H,{}),t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("cubeCamera",{layers:[11],name:"cubeCamera",ref:o,args:[.1,100,i],position:[0,0,5]}),Object(f.jsx)(w,{name:"mirrorShards",factor:-.001,offset:1,children:Object(f.jsx)("group",{ref:c,children:Object(f.jsx)(N,{position:[0,0,2],scale:[.35,.35,.35],meshLayers:[0,11],envMap:i.texture})})})]})]})};var D=function(){var e=Object(c.f)(),t=e.size,r=e.camera,n=Object(a.useRef)(x.fov),o=Object(a.useRef)(),i=Object(a.useRef)(t.height);return Object(a.useEffect)((function(){var e=function(){var e=n.current*Math.PI/180,t=180*(2*Math.atan(Math.tan(e/2)*window.innerHeight/i.current))/Math.PI;r.fov=t,i.current=window.innerHeight,n.current=t};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r]),Object(c.c)((function(){o.current&&(o.current.material.opacity=p.MathUtils.lerp(o.current.material.opacity,0,.1))})),Object(f.jsx)(S,{name:"startupPlane",ref:o,color:x.colors.background,position:[0,0,1],scale:[100,100,1]})},J=function(e){var t=e.setScrollTop,r=Object(a.useRef)(null),n=Object(a.useRef)(0),o=Object(a.useRef)(),i=Object(a.useCallback)((function(e){if(e.target===e.currentTarget){t(e.target.scrollTop);var r,a,i,c,s,l,u=Math.floor(e.target.scrollTop/e.target.scrollHeight*10);if(n.current!==u)null===o||void 0===o||null===(r=o.current)||void 0===r||null===(a=r.children)||void 0===a||null===(i=a.item(n.current))||void 0===i||i.classList.toggle("active"),null===o||void 0===o||null===(c=o.current)||void 0===c||null===(s=c.children)||void 0===s||null===(l=s.item(u))||void 0===l||l.classList.toggle("active"),n.current=u}}),[t]);return Object(a.useEffect)((function(){var e,t,n;o.current||(o.current=document.getElementById("nav"),null===o||void 0===o||null===(e=o.current)||void 0===e||null===(t=e.children)||void 0===t||null===(n=t.item(0))||void 0===n||n.classList.toggle("active"));i({target:r.current})}),[i]),Object(f.jsx)("div",{className:"scrollContainer",onScroll:i,ref:r,children:new Array(x.sections).fill(null).map((function(e,t){return Object(f.jsx)("div",{id:"0"+t,style:{height:"".concat(x.pages/x.sections*100,"vh")}},t)}))})},K=function(){return Object(f.jsx)("div",{className:"nav-container",children:Object(f.jsx)("div",{id:"nav",className:"nav",children:new Array(x.sections).fill(null).map((function(e,t){return Object(f.jsx)("a",{href:"#0"+t,className:"nav-item",children:" "},"link-"+t)}))})})},Q=function(e){var t=e.setShowMirrorShards;return Object(f.jsx)("button",{onClick:t,className:"btn"})};function X(){var e=Object(a.useState)(!0),t=Object(n.a)(e,2),r=t[0],o=t[1],i=Object(a.useRef)(x.scrollTop);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(c.a,{concurrent:!0,shadowMap:!0,camera:{position:[0,0,5]},children:[Object(f.jsxs)(a.Suspense,{fallback:Object(f.jsx)(h,{}),children:[Object(f.jsx)(s.Provider,{value:i,children:Object(f.jsx)(G,{showMirrorShards:r})}),Object(f.jsx)(D,{})]}),Object(f.jsx)("ambientLight",{intensity:.8})]}),Object(f.jsx)(J,{setScrollTop:function(e){i.current=e}}),Object(f.jsx)(K,{}),Object(f.jsx)(Q,{setShowMirrorShards:function(){return o((function(e){return!e}))}})]})}i.a.render(Object(f.jsx)(X,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.dff2f5b4.chunk.js.map